<!DOCTYPE html>
<html>
<head>
  <title>2-Man Team Golf Scorecard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#317EFB"/>
  <style>
    body { font-family: Arial, sans-serif; padding: 10px; }
    table { border-collapse: collapse; width: 100%; overflow-x: auto; display: block; }
    th, td { border: 1px solid #ccc; padding: 6px; text-align: center; font-size: 14px; }
    th { background: #f0f0f0; }
    input[type="number"], input[type="text"] { width: 50px; font-size: 14px; }
    label input { width: auto; margin: 2px; font-size: 14px; }
    .player-labels { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 15px; }
    .player-labels div { flex: 1 1 100%; max-width: 100%; }
    .player-labels input { width: 100%; box-sizing: border-box; }
    @media (min-width: 500px) {
      .player-labels div { flex: 1 1 45%; }
    }
    @media (max-width: 768px) {
      table, thead, tbody, th, td, tr { display: block; }
      thead tr { display: none; }
      td { position: relative; padding-left: 50%; }
      td::before {
        position: absolute;
        top: 6px;
        left: 6px;
        width: 45%;
        white-space: nowrap;
        font-weight: bold;
      }
    }
  </style>
</head>
<body>
  <h2>2-Man Team Golf Scorecard</h2>
  <div class="player-labels">
    <div><label>Player A1: <input id="teamA1" placeholder="Player A1"></label></div>
    <div><label>Player A2: <input id="teamA2" placeholder="Player A2"></label></div>
    <div><label>Player B1: <input id="teamB1" placeholder="Player B1"></label></div>
    <div><label>Player B2: <input id="teamB2" placeholder="Player B2"></label></div>
  </div>

  <table id="scoreTable">
    <thead>
      <tr>
        <th>Hole</th>
        <th>Par</th>
        <th>Player A1</th>
        <th>Player A2</th>
        <th>Best Ball (Team A)</th>
        <th>Birdie (A)</th>
        <th>Player B1</th>
        <th>Player B2</th>
        <th>Best Ball (Team B)</th>
        <th>Birdie (B)</th>
      </tr>
    </thead>
    <tbody>
      <script>
        const parValues = [4,5,3,4,4,4,4,3,5,4,5,4,4,3,5,3,4,4];
        for (let i = 1; i <= 18; i++) {
          document.write(`<tr>
            <td>${i}</td>
            <td><input type="number" min="1" id="par_${i}" value="${parValues[i - 1]}" onchange="calculate(${i})"></td>
            <td><input type="number" min="1" id="a1_${i}" onchange="calculate(${i})"></td>
            <td><input type="number" min="1" id="a2_${i}" onchange="calculate(${i})"></td>
            <td id="teamA_${i}">-</td>
            <td id="birdieA_${i}">-</td>
            <td><input type="number" min="1" id="b1_${i}" onchange="calculate(${i})"></td>
            <td><input type="number" min="1" id="b2_${i}" onchange="calculate(${i})"></td>
            <td id="teamB_${i}">-</td>
            <td id="birdieB_${i}">-</td>
          </tr>`);
        }
      </script>
    </tbody>
    <tfoot>
      <tr>
        <th>Total</th>
        <td></td>
        <td colspan="2"></td>
        <th id="totalA">0</th>
        <th id="totalBirdiesA">0</th>
        <td colspan="2"></td>
        <th id="totalB">0</th>
        <th id="totalBirdiesB">0</th>
      </tr>
    </tfoot>
  </table>

  <script>
    function calculate(hole) {
      const a1 = parseInt(document.getElementById(`a1_${hole}`).value) || 0;
      const a2 = parseInt(document.getElementById(`a2_${hole}`).value) || 0;
      const b1 = parseInt(document.getElementById(`b1_${hole}`).value) || 0;
      const b2 = parseInt(document.getElementById(`b2_${hole}`).value) || 0;
      const par = parseInt(document.getElementById(`par_${hole}`).value) || 0;

      const bestA = Math.min(a1 || Infinity, a2 || Infinity);
      const bestB = Math.min(b1 || Infinity, b2 || Infinity);

      document.getElementById(`teamA_${hole}`).innerText = bestA < Infinity ? bestA : '-';
      document.getElementById(`teamB_${hole}`).innerText = bestB < Infinity ? bestB : '-';

      document.getElementById(`birdieA_${hole}`).innerText = (par > 0 && bestA < par) ? '✔️' : '-';
      document.getElementById(`birdieB_${hole}`).innerText = (par > 0 && bestB < par) ? '✔️' : '-';

      let totalA = 0;
      let totalB = 0;
      let birdiesA = 0;
      let birdiesB = 0;

      for (let i = 1; i <= 18; i++) {
        const valA = parseInt(document.getElementById(`teamA_${i}`).innerText);
        const valB = parseInt(document.getElementById(`teamB_${i}`).innerText);
        const parHole = parseInt(document.getElementById(`par_${i}`).value);

        if (!isNaN(valA)) totalA += valA;
        if (!isNaN(valB)) totalB += valB;

        if (!isNaN(parHole) && valA < parHole) birdiesA++;
        if (!isNaN(parHole) && valB < parHole) birdiesB++;
      }

      document.getElementById("totalA").innerText = totalA;
      document.getElementById("totalB").innerText = totalB;
      document.getElementById("totalBirdiesA").innerText = birdiesA;
      document.getElementById("totalBirdiesB").innerText = birdiesB;
    }

    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js')
          .then(reg => console.log('Service worker registered.', reg))
          .catch(err => console.error('Service worker registration failed:', err));
      });
    }
  </script>
</body>
</html>
